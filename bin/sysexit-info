#!/usr/bin/env python3
"""Print some human-friendly information about the given status code."""
try:
    from signal import Signals
except ImportError:
    # Quietly fail on older Pythons
    import sys
    sys.exit(1)


info_messages = {
    0: 'Process exited successfully',
    1: '[default error code]',
    2: 'Error with shell builtin',
    126: 'Cannot execute command. Do you need to `chmod a+x` it?',
    127: 'Command not found. Is it on your $PATH? Did you make a typo?',
    128: 'Invalid exit status: must be an integer from 0-255',
    255: 'Exit status out of range: must be an integer from 0-255',
}


def info(code, default='Unknown error'):
    try:
        return info_messages[code]
    except KeyError:
        pass

    if 128 < code < 255:
        signum = code - 128
        try:
            sig = Signals(signum)
        except ValueError:
            name = 'unknown signal'
        else:
            name = sig.name
        return 'Terminated by {} ({})'.format(name, signum)

    return default


if __name__ == '__main__':
    import sys
    code = int(sys.argv[1])
    print('Error {}: {}'.format(code, info(code)))
